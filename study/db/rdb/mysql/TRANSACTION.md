## TRANSACTION
> ### TRANSACTION 이란?
트랜잭션(Transaction)은 데이터베이스 관리 시스템(DBMS)에서 하나의 논리적 작업 단위를 구성하는 일련의 연산들을 의미</br>
트랜잭션은 데이터베이스의 상태를 변화시키기 위해 수행되는 작업의 집합으로, 다음과 같은 특성을 가짐

1. **원자성(Atomicity)**: 트랜잭션의 모든 연산은 모두 성공적으로 완료되거나, 전혀 수행되지 않은 것처럼 만들어야 함. 즉, 트랜잭션 내의 모든 연산이 성공적으로 완료되지 않으면, 트랜잭션이 수행한 모든 연산은 취소되어야 함.

2. **일관성(Consistency)**: 트랜잭션이 성공적으로 완료되면, 데이터베이스는 일관성 있는 상태를 유지해야 함. 트랜잭션이 수행되기 전과 후의 데이터베이스 상태는 일관성을 가져야 함.

3. **격리성(Isolation)**: 동시에 여러 트랜잭션이 수행될 때, 각 트랜잭션은 독립적으로 수행되어야 함. 하나의 트랜잭션이 완료되기 전까지 다른 트랜잭션이 그 결과를 참조하거나 영향을 받아서는 안 됨.

4. **지속성(Durability)**: 트랜잭션이 성공적으로 완료되면, 그 결과는 영구적으로 반영되어야 함. 시스템에 장애가 발생하더라도 트랜잭션의 결과는 손실되지 않아야 함.

트랜잭션은 데이터베이스의 무결성을 유지하고, 여러 사용자가 동시에 데이터베이스에 접근할 때 발생할 수 있는 문제를 방지하기 위해 사용됨.

> ### TRANSACTION의 특성
1. 원자성: 모든 연산이 성공적으로 완료되거나 전혀 수행되지 않음
2. 일관성: 트랜잭션 전후의 데이터베이스 상태가 일관성을 가짐
3. 격리성: 동시에 여러 트랜잭션이 독립적으로 수행됨
4. 지속성: 트랜잭션 완료 후 결과가 영구적으로 반영됨

> ### 코드로 보기
1. 트랜잭션 시작, 커밋 및 롤백
    ```sql
    START TRANSACTION;
    -- 트랜잭션 내의 여러 SQL 연산
    UPDATE accounts SET balance = balance - 100 WHERE account_id = 1;
    UPDATE accounts SET balance = balance + 100 WHERE account_id = 2;
    -- 모든 연산이 성공적으로 완료되면 커밋
    COMMIT;
    -- 만약 오류가 발생하면 롤백
    ROLLBACK;
    ```

> ### 왜 사용해야 하는가?
1. **데이터 무결성 유지**: 트랜잭션을 사용하면 데이터의 일관성과 무결성을 유지할 수 있음
2. **동시성 제어**: 여러 사용자가 동시에 데이터베이스에 접근할 때 발생할 수 있는 문제를 방지
3. **오류 복구**: 트랜잭션 실패 시 데이터를 원래 상태로 복구할 수 있음

> ### 쉬운 요약
1. TRANSACTION은 "데이터베이스 관리 시스템에서 하나의 논리적 작업 단위를 구성하는 일련의 연산들"
    - 데이터의 일관성과 무결성을 유지하기 위해 사용됨

2. 원자성, 일관성, 격리성, 지속성 등의 특성을 가짐

> ### 비유
1. 은행에서의 거래
    - TRANSACTION은 은행에서 "한 계좌에서 다른 계좌로 돈을 이체하는 작업"과 같음
    - 예: 돈이 성공적으로 이체되거나, 전혀 이체되지 않음

2. 온라인 쇼핑
    - TRANSACTION은 온라인 쇼핑에서 "상품을 장바구니에 담고 결제하는 작업"과 같음
    - 예: 결제가 성공적으로 완료되거나, 장바구니에 담긴 상품이 그대로 유지됨

[뒤로](mysql.md)
